{"ast":null,"code":"import axios from 'axios';\nimport config from '../../config';\nexport default function apiClient(req) {\n  var instance = axios.create({\n    baseURL: __SERVER__ ? \"http://\".concat(config.apiHost, \":\").concat(config.apiPort) : '/api'\n  });\n  var token;\n\n  instance.setJwtToken = function (newToken) {\n    token = newToken;\n  };\n\n  instance.interceptors.request.use(function (conf) {\n    if (__SERVER__) {\n      if (req.header('cookie')) {\n        conf.headers.Cookie = req.header('cookie');\n      }\n\n      if (req.header('authorization')) {\n        conf.headers.authorization = token || req.header('authorization') || '';\n      }\n    }\n\n    return conf;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    return response.data;\n  }, function (error) {\n    return Promise.reject(error.response ? error.response.data : error);\n  });\n  return instance;\n}","map":{"version":3,"sources":["C:\\projects\\My Projects\\redux_form\\fss\\src\\helpers\\apiClient.js"],"names":["axios","config","apiClient","req","instance","create","baseURL","__SERVER__","apiHost","apiPort","token","setJwtToken","newToken","interceptors","request","use","conf","header","headers","Cookie","authorization","error","Promise","reject","response","data"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AAEA,eAAe,SAASC,SAAT,CAAmBC,GAAnB,EAAwB;AACtC,MAAMC,QAAQ,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC7BC,IAAAA,OAAO,EAAEC,UAAU,oBAAaN,MAAM,CAACO,OAApB,cAA+BP,MAAM,CAACQ,OAAtC,IAAkD;AADxC,GAAb,CAAjB;AAIA,MAAIC,KAAJ;;AAEAN,EAAAA,QAAQ,CAACO,WAAT,GAAuB,UAAAC,QAAQ,EAAI;AAClCF,IAAAA,KAAK,GAAGE,QAAR;AACA,GAFD;;AAIAR,EAAAA,QAAQ,CAACS,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACC,UAAAC,IAAI,EAAI;AACP,QAAIT,UAAJ,EAAgB;AACf,UAAIJ,GAAG,CAACc,MAAJ,CAAW,QAAX,CAAJ,EAA0B;AACzBD,QAAAA,IAAI,CAACE,OAAL,CAAaC,MAAb,GAAsBhB,GAAG,CAACc,MAAJ,CAAW,QAAX,CAAtB;AACA;;AACD,UAAId,GAAG,CAACc,MAAJ,CAAW,eAAX,CAAJ,EAAiC;AAChCD,QAAAA,IAAI,CAACE,OAAL,CAAaE,aAAb,GAA6BV,KAAK,IAAIP,GAAG,CAACc,MAAJ,CAAW,eAAX,CAAT,IAAwC,EAArE;AACA;AACD;;AACD,WAAOD,IAAP;AACA,GAXF,EAYC,UAAAK,KAAK;AAAA,WAAIC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAJ;AAAA,GAZN;AAeAjB,EAAAA,QAAQ,CAACS,YAAT,CAAsBW,QAAtB,CAA+BT,GAA/B,CACC,UAAAS,QAAQ;AAAA,WAAIA,QAAQ,CAACC,IAAb;AAAA,GADT,EAEC,UAAAJ,KAAK;AAAA,WAAIC,OAAO,CAACC,MAAR,CAAeF,KAAK,CAACG,QAAN,GAAiBH,KAAK,CAACG,QAAN,CAAeC,IAAhC,GAAuCJ,KAAtD,CAAJ;AAAA,GAFN;AAKA,SAAOjB,QAAP;AACA","sourcesContent":["import axios from 'axios';\r\nimport config from '../../config';\r\n\r\nexport default function apiClient(req) {\r\n\tconst instance = axios.create({\r\n\t\tbaseURL: __SERVER__ ? `http://${config.apiHost}:${config.apiPort}` : '/api',\r\n\t});\r\n\r\n\tlet token;\r\n\r\n\tinstance.setJwtToken = newToken => {\r\n\t\ttoken = newToken;\r\n\t};\r\n\r\n\tinstance.interceptors.request.use(\r\n\t\tconf => {\r\n\t\t\tif (__SERVER__) {\r\n\t\t\t\tif (req.header('cookie')) {\r\n\t\t\t\t\tconf.headers.Cookie = req.header('cookie');\r\n\t\t\t\t}\r\n\t\t\t\tif (req.header('authorization')) {\r\n\t\t\t\t\tconf.headers.authorization = token || req.header('authorization') || '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn conf;\r\n\t\t},\r\n\t\terror => Promise.reject(error),\r\n\t);\r\n\r\n\tinstance.interceptors.response.use(\r\n\t\tresponse => response.data,\r\n\t\terror => Promise.reject(error.response ? error.response.data : error),\r\n\t);\r\n\r\n\treturn instance;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}